(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{5619:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return o(1153)}])},1587:function(e,t,o){"use strict";var n=o(5893),s=o(1014),a=o.n(s);t.Z=()=>{let e=window.location.pathname;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:a().headerTop,children:(0,n.jsx)("div",{className:a().textBottomLeft,children:"ロダン大喜利"})}),(0,n.jsxs)("div",{className:a().headerBottom,children:[(0,n.jsx)("a",{href:"/",className:"".concat(a().link," ").concat("/"===e?a().active:""),children:"Home"}),(0,n.jsx)("a",{href:"/create",className:"".concat(a().link," ").concat("/create/"===e?a().active:""),children:"Create"}),(0,n.jsx)("a",{href:"/view",className:"".concat(a().link," ").concat("/view/"===e?a().active:""),children:"View"}),(0,n.jsx)("a",{href:"/outstanding",className:"".concat(a().link," ").concat("/outstanding/"===e?a().active:""),children:"Outstanding"})]})]})}},1153:function(e,t,o){"use strict";o.r(t);var n=o(5893),s=o(221),a=o(9008),c=o.n(a),r=o(7294),i=o(1587),l=o(9777),d=o(195),h=o.n(d);t.default=()=>{let[e,t]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),d={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0},g=async()=>{try{var e;let o=await l.x.image.$post();if(!o){console.error("API response is null");return}console.log(o),(null===(e=o.data[0])||void 0===e?void 0:e.b64_json)&&t(o.data[0].b64_json)}catch(e){console.error("API error:",e)}},u=async()=>{console.log("Starting submitBoke function...");let t=e;try{console.log("Converting Base64 to Blob...");let o=function(e){let t=";base64,";if(-1===e.indexOf(t)){let t=e.split(","),o=t[0].split(":")[1],n=t[1];return new Blob([n],{type:o})}let o=e.split(t),n=o[0].split(":")[1],s=window.atob(o[1]),a=s.length,c=new Uint8Array(a);for(let e=0;e<a;++e)c[e]=s.charCodeAt(e);return new Blob([c],{type:n})}(e);console.log("Converted to Blob successfully."),console.log("Creating File object from Blob...");let n=new File([o],"compressedImage.jpg",{type:"image/jpeg"});console.log("File object created successfully."),console.log("Starting image compression...");let a=await (0,s.Z)(n,d);console.log("Image compressed successfully."),console.log("Converting compressed image to Base64..."),t=await s.Z.getDataUrlFromFile(a),console.log("Converted to Base64 successfully.")}catch(e){console.error("Image compression error:",e);return}console.log("Sending compressed image data..."),await l.x.boke.post({body:{userId:"gouta",text:o,image:t,like:0}}),console.log("Data sent successfully.")};return(0,n.jsxs)("div",{className:h().container,children:[(0,n.jsxs)(c(),{children:[(0,n.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,n.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,n.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;400&display=swap",rel:"stylesheet"})]}),(0,n.jsx)(i.Z,{}),(0,n.jsxs)("div",{className:h().content,children:[(0,n.jsx)("button",{className:h().bokeButton,onClick:g,children:"ぼける"}),e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:h().imageContainer,children:(0,n.jsx)("img",{src:"data:image/png;base64,".concat(e),alt:"Generated Data",width:300,height:300})}),(0,n.jsx)("input",{type:"text",className:h().textBox,value:o,onChange:e=>a(e.target.value),placeholder:"ぼけの言葉を入力"}),(0,n.jsx)("button",{className:h().submitButton,onClick:u,children:"投稿する"})]})]})]})}},9777:function(e,t,o){"use strict";o.d(t,{x:function(){return c}});var n=o(9239),s=o(7080),a=o(6154);let c=(e=>{let{baseURL:t,fetch:o}=e,n=(void 0===t?"":t).replace(/\/$/,""),a="/boke",c="/health",r="/image",i="/session",l="/tasks",d="/tasks/di",h="POST",g="DELETE",u="PATCH";return{boke:{get:e=>o(n,a,"GET",e).json(),$get:e=>o(n,a,"GET",e).json().then(e=>e.body),post:e=>o(n,a,h,e).send(),$post:e=>o(n,a,h,e).send().then(e=>e.body),$path:()=>"".concat(n).concat(a)},health:{get:e=>o(n,c,"GET",e).json(),$get:e=>o(n,c,"GET",e).json().then(e=>e.body),$path:()=>"".concat(n).concat(c)},image:{get:e=>o(n,r,"GET",e).text(),$get:e=>o(n,r,"GET",e).text().then(e=>e.body),post:e=>o(n,r,h,e).json(),$post:e=>o(n,r,h,e).json().then(e=>e.body),$path:()=>"".concat(n).concat(r)},me:{get:e=>o(n,"/me","GET",e).json(),$get:e=>o(n,"/me","GET",e).json().then(e=>e.body),$path:()=>"".concat(n).concat("/me")},session:{post:e=>o(n,i,h,e).json(),$post:e=>o(n,i,h,e).json().then(e=>e.body),delete:e=>o(n,i,g,e).json(),$delete:e=>o(n,i,g,e).json().then(e=>e.body),$path:()=>"".concat(n).concat(i)},tasks:{_taskId:e=>{let t="".concat(l,"/").concat(e);return{patch:e=>o(n,t,u,e).json(),$patch:e=>o(n,t,u,e).json().then(e=>e.body),delete:e=>o(n,t,g,e).json(),$delete:e=>o(n,t,g,e).json().then(e=>e.body),$path:()=>"".concat(n).concat(t)}},di:{get:e=>o(n,d,"GET",e).json(),$get:e=>o(n,d,"GET",e).json().then(e=>e.body),$path:()=>"".concat(n).concat(d)},get:e=>o(n,l,"GET",e).json(),$get:e=>o(n,l,"GET",e).json().then(e=>e.body),post:e=>o(n,l,h,e).json(),$post:e=>o(n,l,h,e).json().then(e=>e.body),patch:e=>o(n,l,u,e).json(),$patch:e=>o(n,l,u,e).json().then(e=>e.body),delete:e=>o(n,l,g,e).json(),$delete:e=>o(n,l,g,e).json().then(e=>e.body),$path:e=>"".concat(n).concat(l).concat(e&&e.query?"?".concat((0,s._K)(e.query)):"")},get:e=>o(n,"","GET",e).text(),$get:e=>o(n,"","GET",e).text().then(e=>e.body),$path:()=>"".concat(n)}})((0,n.Z)(a.Z.create({withCredentials:!0})))},1014:function(e){e.exports={headerTop:"Header_headerTop__PiWQz",textBottomLeft:"Header_textBottomLeft__943jk",headerBottom:"Header_headerBottom__VzkFF",link:"Header_link__p2PJz",active:"Header_active__8Eipm"}},195:function(e){e.exports={container:"create_container__X_Yqv",content:"create_content__6AfH7",bokeButton:"create_bokeButton__s5WQF",imageContainer:"create_imageContainer__eAZyS",textBox:"create_textBox__yZYkI",submitButton:"create_submitButton__0sdRv"}}},function(e){e.O(0,[465,221,774,888,179],function(){return e(e.s=5619)}),_N_E=e.O()}]);