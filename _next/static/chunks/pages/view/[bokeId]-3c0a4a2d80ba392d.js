(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{5053:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view/[bokeId]",function(){return o(4050)}])},1587:function(e,t,o){"use strict";var n=o(5893),a=o(1014),c=o.n(a);t.Z=()=>{let e=window.location.pathname;return(0,n.jsxs)("div",{className:c().headerContainer,children:[(0,n.jsx)("div",{className:c().headerTop,children:(0,n.jsx)("div",{className:c().textBottomLeft,children:"Thinker"})}),(0,n.jsxs)("div",{className:c().headerBottom,children:[(0,n.jsx)("a",{href:"/",className:"".concat(c().link," ").concat("/"===e?c().active:""),children:"Home"}),(0,n.jsx)("a",{href:"/view",className:"".concat(c().link," ").concat("/view/"===e?c().active:""),children:"View"}),(0,n.jsx)("a",{href:"/create",className:"".concat(c().link," ").concat("/create/"===e?c().active:""),children:"Create"}),(0,n.jsx)("a",{href:"/outstanding",className:"".concat(c().link," ").concat("/outstanding/"===e?c().active:""),children:"Outstanding"})]})]})}},4050:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return b}});var n=o(5893),a=o(3549),c=o(7976),l=o(9008),s=o.n(l),r=o(1163),i=o(7294),d=o(3024),h=o(2489),u=o(4133),f=o(7057),k=o.n(f),g=e=>{let{selectedBoke:t,value:o,handleRatingChange:a,handleCancel:c,openTwitterShare:l,openFacebookShare:s,closeBokeDetail:r,timeSince:i}=e;return(0,n.jsxs)("div",{className:k().fullScreenBokeRight,children:[(0,n.jsx)("p",{className:k().fullScreenText,children:t.text}),(0,n.jsx)("p",{className:k().fullScreenTime,children:i(new Date(t.createdAt))}),(0,n.jsxs)("div",{className:k().twitterShare,children:[(0,n.jsx)(h.G,{icon:d.mim,size:"2xs",style:{color:"#434343"},onClick:()=>l(t.text)}),(0,n.jsx)(h.G,{icon:d.pZl,size:"2xs",style:{color:"#434343"},onClick:()=>s(t.text)})]}),(0,n.jsxs)("p",{className:k().middleEreaLikeCount,children:["★",t.like]}),(0,n.jsxs)("div",{className:k().rating,children:[(0,n.jsx)(u.Z,{name:"customized-10",size:"large",value:o,onChange:a,max:3}),o>0&&(0,n.jsx)("button",{onClick:c,children:"取り消し"})]}),(0,n.jsx)("button",{className:k().closeButton,onClick:r,children:"閉じる"})]})},p=o(1587),_=o(9777);let m=()=>{let[e,t]=(0,i.useState)(null),[o,n]=(0,i.useState)(0),a=async(t,a)=>{if(null!==a){console.log(a-o);let t=a-o;await _.x.boke.post({body:{bokeId:null==e?void 0:e.bokeId,userId:void 0,text:void 0,image:void 0,like:t}}),n(a)}},c=(0,r.useRouter)(),l=c.query.bokeId,s=c.query.order,[d,h]=(0,i.useState)([]),[u,f]=(0,i.useState)([]),[k,g]=(0,i.useState)(null),p=async()=>{let e=await _.x.boke.$get({});Array.isArray(e)&&h(e)},m=u.findIndex(e=>e.bokeId===k),x=(0,i.useCallback)(async()=>{if(null!==k){console.log(k);let e=await _.x.boke.selected.$post({body:{bokeId:k}});console.log(e),Array.isArray(e)?console.error("Expected a single BokeModel but received an array."):t(e)}},[k,t]);return{openTwitterShare:e=>{let t="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(e));window.open(t,"_blank","noopener,noreferrer")},openFacebookShare:e=>{let t="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e));window.open(t,"_blank","noopener,noreferrer")},handleCancel:()=>{console.log(-o),n(0)},handleRatingChange:a,timeSince:function(e){let t=Math.floor((new Date().getTime()-e.getTime())/1e3),o=Math.floor(t/31536e3);return o>1?"".concat(o," 年前"):(o=Math.floor(t/2592e3))>1?"".concat(o," 月前"):(o=Math.floor(t/86400))>1?"".concat(o," 日前"):(o=Math.floor(t/3600))>1?"".concat(o," 時間前"):(o=Math.floor(t/60))>1?"".concat(o," 分前"):"".concat(Math.floor(t)," 秒前")},selectedBoke:e,value:o,setSelectedBoke:t,router:c,rawBokeId:l,order:s,bokeData:d,sortedBokeData:u,setSortedBokeData:f,bokeId:k,setBokeId:g,fetchBoke:p,currentBokeIndex:m,navigateToLeft:()=>{if(console.log("left"),console.log(m),m>0){let e=u[m-1].bokeId;c.push("/view/".concat(e,"?order=").concat(s))}},navigateToRight:()=>{if(console.log("right"),console.log(m),m<u.length-1){let e=u[m+1].bokeId;c.push("/view/".concat(e,"?order=").concat(s))}},fetchSelectedBoke:x,closeBokeDetail:()=>{t(null),c.push("/view/")}}};var x=o(8575),j=o.n(x),b=()=>{let{openTwitterShare:e,openFacebookShare:t,handleCancel:o,handleRatingChange:l,timeSince:d,selectedBoke:h,value:u,setSelectedBoke:f}=m(),k=(0,r.useRouter)(),x=k.query.bokeId,b=k.query.order,[y,S]=(0,i.useState)([]),[w,v]=(0,i.useState)([]),[B,E]=(0,i.useState)(null),T=async()=>{let e=await _.x.boke.$get({});Array.isArray(e)&&S(e)},$=w.findIndex(e=>e.bokeId===B),N=(0,i.useCallback)(async()=>{if(null!==B){console.log(B);let e=await _.x.boke.selected.$post({body:{bokeId:B}});console.log(e),Array.isArray(e)?console.error("Expected a single BokeModel but received an array."):f(e)}},[B,f]);return(0,i.useEffect)(()=>{T()},[]),(0,i.useEffect)(()=>{if("like"===b){let e=[...y].sort((e,t)=>t.like-e.like);v(e)}else if("createdAt"===b){let e=[...y].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());v(e)}else if("random"===b){let e=[...y].sort(()=>Math.random()-.5);v(e)}else v(y)},[b,y]),(0,i.useEffect)(()=>{if("string"==typeof x){let e=x.replace(/\/$/,""),t=parseInt(e);isNaN(t)||E(t)}},[x]),(0,i.useEffect)(()=>{N()},[N]),(0,n.jsxs)("div",{className:j().container,children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,n.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,n.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;400&display=swap",rel:"stylesheet"})]}),(0,n.jsx)(p.Z,{}),(0,n.jsx)("button",{className:j().leftButton,onClick:()=>{if(console.log("left"),console.log($),$>0){let e=w[$-1].bokeId;k.push("/view/".concat(e,"?order=").concat(b))}},children:(0,n.jsx)(a.Z,{fontSize:"large"})}),null!==h&&(0,n.jsx)("div",{className:j().contentWrapper,children:(0,n.jsxs)("div",{className:j().fullScreenBoke,children:[(0,n.jsx)("div",{className:j().fullScreenBokeLeft,children:(0,n.jsx)("img",{className:j().fullScreenImage,src:h.image,alt:"Boke ".concat(h.bokeId)})}),(0,n.jsx)(g,{selectedBoke:h,value:u,handleRatingChange:l,handleCancel:o,openTwitterShare:e,openFacebookShare:t,closeBokeDetail:()=>{f(null),k.push("/view/")},timeSince:d})]})}),(0,n.jsx)("button",{className:j().rightButton,onClick:()=>{if(console.log("right"),console.log($),$<w.length-1){let e=w[$+1].bokeId;k.push("/view/".concat(e,"?order=").concat(b))}},children:(0,n.jsx)(c.Z,{fontSize:"large"})})]})}},9777:function(e,t,o){"use strict";o.d(t,{x:function(){return l}});var n=o(9239),a=o(7080),c=o(6154);let l=(e=>{let{baseURL:t,fetch:o}=e,n=(void 0===t?"":t).replace(/\/$/,""),c="/boke",l="/boke/selected",s="/health",r="/image",i="/session",d="/tasks",h="/tasks/di",u="POST",f="DELETE",k="PATCH";return{boke:{selected:{get:e=>o(n,l,"GET",e).text(),$get:e=>o(n,l,"GET",e).text().then(e=>e.body),post:e=>o(n,l,u,e).json(),$post:e=>o(n,l,u,e).json().then(e=>e.body),$path:()=>"".concat(n).concat(l)},get:e=>o(n,c,"GET",e).json(),$get:e=>o(n,c,"GET",e).json().then(e=>e.body),post:e=>o(n,c,u,e).send(),$post:e=>o(n,c,u,e).send().then(e=>e.body),$path:()=>"".concat(n).concat(c)},health:{get:e=>o(n,s,"GET",e).json(),$get:e=>o(n,s,"GET",e).json().then(e=>e.body),$path:()=>"".concat(n).concat(s)},image:{get:e=>o(n,r,"GET",e).text(),$get:e=>o(n,r,"GET",e).text().then(e=>e.body),post:e=>o(n,r,u,e).json(),$post:e=>o(n,r,u,e).json().then(e=>e.body),$path:()=>"".concat(n).concat(r)},me:{get:e=>o(n,"/me","GET",e).json(),$get:e=>o(n,"/me","GET",e).json().then(e=>e.body),$path:()=>"".concat(n).concat("/me")},session:{post:e=>o(n,i,u,e).json(),$post:e=>o(n,i,u,e).json().then(e=>e.body),delete:e=>o(n,i,f,e).json(),$delete:e=>o(n,i,f,e).json().then(e=>e.body),$path:()=>"".concat(n).concat(i)},tasks:{_taskId:e=>{let t="".concat(d,"/").concat(e);return{patch:e=>o(n,t,k,e).json(),$patch:e=>o(n,t,k,e).json().then(e=>e.body),delete:e=>o(n,t,f,e).json(),$delete:e=>o(n,t,f,e).json().then(e=>e.body),$path:()=>"".concat(n).concat(t)}},di:{get:e=>o(n,h,"GET",e).json(),$get:e=>o(n,h,"GET",e).json().then(e=>e.body),$path:()=>"".concat(n).concat(h)},get:e=>o(n,d,"GET",e).json(),$get:e=>o(n,d,"GET",e).json().then(e=>e.body),post:e=>o(n,d,u,e).json(),$post:e=>o(n,d,u,e).json().then(e=>e.body),patch:e=>o(n,d,k,e).json(),$patch:e=>o(n,d,k,e).json().then(e=>e.body),delete:e=>o(n,d,f,e).json(),$delete:e=>o(n,d,f,e).json().then(e=>e.body),$path:e=>"".concat(n).concat(d).concat(e&&e.query?"?".concat((0,a._K)(e.query)):"")},get:e=>o(n,"","GET",e).text(),$get:e=>o(n,"","GET",e).text().then(e=>e.body),$path:()=>"".concat(n)}})((0,n.Z)(c.Z.create({withCredentials:!0})))},7057:function(e){e.exports={fullScreenBokeRight:"FullScreenBokeright_fullScreenBokeRight__gJAV1",fullScreenText:"FullScreenBokeright_fullScreenText__3DV43",middleErea:"FullScreenBokeright_middleErea__MRAVj",middleEreaLikeCount:"FullScreenBokeright_middleEreaLikeCount__p6X5X",fullScreenTime:"FullScreenBokeright_fullScreenTime__njS7l",twitterShare:"FullScreenBokeright_twitterShare__7uFyf",rating:"FullScreenBokeright_rating__UCtn4",closeButton:"FullScreenBokeright_closeButton__A7vLj"}},1014:function(e){e.exports={headerContainer:"Header_headerContainer__4fbbd",headerTop:"Header_headerTop__PiWQz",textBottomLeft:"Header_textBottomLeft__943jk",headerBottom:"Header_headerBottom__VzkFF",link:"Header_link__p2PJz",active:"Header_active__8Eipm"}},8575:function(e){e.exports={container:"bokeid_container__9E03J",contentWrapper:"bokeid_contentWrapper__gYIuH",fullScreenBoke:"bokeid_fullScreenBoke__4EPI8",fullScreenBokeLeft:"bokeid_fullScreenBokeLeft__SfJla",fullScreenImage:"bokeid_fullScreenImage__cpdGy",leftButton:"bokeid_leftButton__sSEmB",rightButton:"bokeid_rightButton__DJn3x"}}},function(e){e.O(0,[948,911,73,359,774,888,179],function(){return e(e.s=5053)}),_N_E=e.O()}]);