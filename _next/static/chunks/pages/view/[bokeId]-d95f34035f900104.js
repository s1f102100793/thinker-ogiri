(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{5053:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/view/[bokeId]",function(){return n(4050)}])},1587:function(e,t,n){"use strict";var o=n(5893),c=n(1014),a=n.n(c);t.Z=()=>{let e=window.location.pathname;return(0,o.jsxs)("div",{className:a().headerContainer,children:[(0,o.jsx)("div",{className:a().headerTop,children:(0,o.jsx)("div",{className:a().textBottomLeft,children:"ロダン大喜利"})}),(0,o.jsxs)("div",{className:a().headerBottom,children:[(0,o.jsx)("a",{href:"/",className:"".concat(a().link," ").concat("/"===e?a().active:""),children:"Home"}),(0,o.jsx)("a",{href:"/view",className:"".concat(a().link," ").concat("/view/"===e?a().active:""),children:"View"}),(0,o.jsx)("a",{href:"/create",className:"".concat(a().link," ").concat("/create/"===e?a().active:""),children:"Create"}),(0,o.jsx)("a",{href:"/outstanding",className:"".concat(a().link," ").concat("/outstanding/"===e?a().active:""),children:"Outstanding"})]})]})}},4050:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var o=n(5893),c=n(9008),a=n.n(c),l=n(1163),s=n(7294),r=n(3024),i=n(2489),d=n(7877),h=n(7057),u=n.n(h),f=e=>{let{selectedBoke:t,value:n,handleRatingChange:c,handleCancel:a,openTwitterShare:l,openFacebookShare:s,closeBokeDetail:h,timeSince:f}=e;return(0,o.jsxs)("div",{className:u().fullScreenBokeRight,children:[(0,o.jsx)("p",{className:u().fullScreenText,children:t.text}),(0,o.jsx)("p",{className:u().fullScreenTime,children:f(new Date(t.createdAt))}),(0,o.jsxs)("div",{className:u().twitterShare,children:[(0,o.jsx)(i.G,{icon:r.mim,size:"2xs",style:{color:"#434343"},onClick:()=>l(t.text)}),(0,o.jsx)(i.G,{icon:r.pZl,size:"2xs",style:{color:"#434343"},onClick:()=>s(t.text)})]}),(0,o.jsxs)("p",{className:u().middleEreaLikeCount,children:["★",t.like]}),(0,o.jsxs)("div",{className:u().rating,children:[(0,o.jsx)(d.Z,{name:"customized-10",size:"large",value:n,onChange:c,max:3}),n>0&&(0,o.jsx)("button",{onClick:a,children:"取り消し"})]}),(0,o.jsx)("button",{className:u().closeButton,onClick:h,children:"閉じる"})]})},p=n(1587),k=n(9777);let _=()=>{let[e,t]=(0,s.useState)(null),[n,o]=(0,s.useState)(0),c=async(t,c)=>{if(null!==c){console.log(c-n);let t=c-n;await k.x.boke.post({body:{bokeId:null==e?void 0:e.bokeId,userId:void 0,text:void 0,image:void 0,like:t}}),o(c)}};return{openTwitterShare:e=>{let t="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(e));window.open(t,"_blank","noopener,noreferrer")},openFacebookShare:e=>{let t="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(e));window.open(t,"_blank","noopener,noreferrer")},handleCancel:()=>{console.log(-n),o(0)},handleRatingChange:c,timeSince:function(e){let t=Math.floor((new Date().getTime()-e.getTime())/1e3),n=Math.floor(t/31536e3);return n>1?"".concat(n," 年前"):(n=Math.floor(t/2592e3))>1?"".concat(n," 月前"):(n=Math.floor(t/86400))>1?"".concat(n," 日前"):(n=Math.floor(t/3600))>1?"".concat(n," 時間前"):(n=Math.floor(t/60))>1?"".concat(n," 分前"):"".concat(Math.floor(t)," 秒前")},selectedBoke:e,value:n,setSelectedBoke:t}};var g=n(8575),m=n.n(g),j=()=>{let{openTwitterShare:e,openFacebookShare:t,handleCancel:n,handleRatingChange:c,timeSince:r,selectedBoke:i,value:d,setSelectedBoke:h}=_(),u=(0,l.useRouter)(),g=u.query.bokeId,j=u.query.order,[x,b]=(0,s.useState)([]),[S,y]=(0,s.useState)([]),[w,E]=(0,s.useState)(null),B=async()=>{let e=await k.x.boke.$get({});Array.isArray(e)&&b(e)},v=S.findIndex(e=>e.bokeId===w),T=(0,s.useCallback)(async()=>{if(null!==w){console.log(w);let e=await k.x.boke.selected.$post({body:{bokeId:w}});console.log(e),Array.isArray(e)?console.error("Expected a single BokeModel but received an array."):h(e)}},[w,h]);return(0,s.useEffect)(()=>{B()},[]),(0,s.useEffect)(()=>{if("like"===j){let e=[...x].sort((e,t)=>t.like-e.like);y(e)}else if("createdAt"===j){let e=[...x].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());console.log(e),y(e)}else y(x)},[j,x]),(0,s.useEffect)(()=>{if("string"==typeof g){let e=g.replace(/\/$/,""),t=parseInt(e);isNaN(t)||E(t)}},[g]),(0,s.useEffect)(()=>{T()},[T]),(0,o.jsxs)("div",{className:m().container,children:[(0,o.jsxs)(a(),{children:[(0,o.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,o.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,o.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;400&display=swap",rel:"stylesheet"})]}),(0,o.jsx)(p.Z,{}),(0,o.jsx)("button",{className:m().leftButton,onClick:()=>{if(console.log("left"),console.log(v),v>0){let e=S[v-1].bokeId;u.push("/view/".concat(e,"?order=").concat(j))}},children:"<"}),null!==i&&(0,o.jsx)("div",{className:m().contentWrapper,children:(0,o.jsxs)("div",{className:m().fullScreenBoke,children:[(0,o.jsx)("div",{className:m().fullScreenBokeLeft,children:(0,o.jsx)("img",{className:m().fullScreenImage,src:i.image,alt:"Boke ".concat(i.bokeId)})}),(0,o.jsx)(f,{selectedBoke:i,value:d,handleRatingChange:c,handleCancel:n,openTwitterShare:e,openFacebookShare:t,closeBokeDetail:()=>{h(null),u.push("/view/")},timeSince:r})]})}),(0,o.jsx)("button",{className:m().rightButton,onClick:()=>{if(console.log("right"),console.log(v),v<S.length-1){let e=S[v+1].bokeId;u.push("/view/".concat(e,"?order=").concat(j))}},children:">"})]})}},9777:function(e,t,n){"use strict";n.d(t,{x:function(){return l}});var o=n(9239),c=n(7080),a=n(6154);let l=(e=>{let{baseURL:t,fetch:n}=e,o=(void 0===t?"":t).replace(/\/$/,""),a="/boke",l="/boke/selected",s="/health",r="/image",i="/session",d="/tasks",h="/tasks/di",u="POST",f="DELETE",p="PATCH";return{boke:{selected:{get:e=>n(o,l,"GET",e).text(),$get:e=>n(o,l,"GET",e).text().then(e=>e.body),post:e=>n(o,l,u,e).json(),$post:e=>n(o,l,u,e).json().then(e=>e.body),$path:()=>"".concat(o).concat(l)},get:e=>n(o,a,"GET",e).json(),$get:e=>n(o,a,"GET",e).json().then(e=>e.body),post:e=>n(o,a,u,e).send(),$post:e=>n(o,a,u,e).send().then(e=>e.body),$path:()=>"".concat(o).concat(a)},health:{get:e=>n(o,s,"GET",e).json(),$get:e=>n(o,s,"GET",e).json().then(e=>e.body),$path:()=>"".concat(o).concat(s)},image:{get:e=>n(o,r,"GET",e).text(),$get:e=>n(o,r,"GET",e).text().then(e=>e.body),post:e=>n(o,r,u,e).json(),$post:e=>n(o,r,u,e).json().then(e=>e.body),$path:()=>"".concat(o).concat(r)},me:{get:e=>n(o,"/me","GET",e).json(),$get:e=>n(o,"/me","GET",e).json().then(e=>e.body),$path:()=>"".concat(o).concat("/me")},session:{post:e=>n(o,i,u,e).json(),$post:e=>n(o,i,u,e).json().then(e=>e.body),delete:e=>n(o,i,f,e).json(),$delete:e=>n(o,i,f,e).json().then(e=>e.body),$path:()=>"".concat(o).concat(i)},tasks:{_taskId:e=>{let t="".concat(d,"/").concat(e);return{patch:e=>n(o,t,p,e).json(),$patch:e=>n(o,t,p,e).json().then(e=>e.body),delete:e=>n(o,t,f,e).json(),$delete:e=>n(o,t,f,e).json().then(e=>e.body),$path:()=>"".concat(o).concat(t)}},di:{get:e=>n(o,h,"GET",e).json(),$get:e=>n(o,h,"GET",e).json().then(e=>e.body),$path:()=>"".concat(o).concat(h)},get:e=>n(o,d,"GET",e).json(),$get:e=>n(o,d,"GET",e).json().then(e=>e.body),post:e=>n(o,d,u,e).json(),$post:e=>n(o,d,u,e).json().then(e=>e.body),patch:e=>n(o,d,p,e).json(),$patch:e=>n(o,d,p,e).json().then(e=>e.body),delete:e=>n(o,d,f,e).json(),$delete:e=>n(o,d,f,e).json().then(e=>e.body),$path:e=>"".concat(o).concat(d).concat(e&&e.query?"?".concat((0,c._K)(e.query)):"")},get:e=>n(o,"","GET",e).text(),$get:e=>n(o,"","GET",e).text().then(e=>e.body),$path:()=>"".concat(o)}})((0,o.Z)(a.Z.create({withCredentials:!0})))},7057:function(e){e.exports={fullScreenBokeRight:"FullScreenBokeright_fullScreenBokeRight__gJAV1",fullScreenText:"FullScreenBokeright_fullScreenText__3DV43",middleErea:"FullScreenBokeright_middleErea__MRAVj",middleEreaLikeCount:"FullScreenBokeright_middleEreaLikeCount__p6X5X",fullScreenTime:"FullScreenBokeright_fullScreenTime__njS7l",twitterShare:"FullScreenBokeright_twitterShare__7uFyf",rating:"FullScreenBokeright_rating__UCtn4",closeButton:"FullScreenBokeright_closeButton__A7vLj"}},1014:function(e){e.exports={headerContainer:"Header_headerContainer__4fbbd",headerTop:"Header_headerTop__PiWQz",textBottomLeft:"Header_textBottomLeft__943jk",headerBottom:"Header_headerBottom__VzkFF",link:"Header_link__p2PJz",active:"Header_active__8Eipm"}},8575:function(e){e.exports={container:"bokeid_container__9E03J",contentWrapper:"bokeid_contentWrapper__gYIuH",fullScreenBoke:"bokeid_fullScreenBoke__4EPI8",fullScreenBokeLeft:"bokeid_fullScreenBokeLeft__SfJla",fullScreenImage:"bokeid_fullScreenImage__cpdGy",leftButton:"bokeid_leftButton__sSEmB",rightButton:"bokeid_rightButton__DJn3x"}}},function(e){e.O(0,[948,465,300,774,888,179],function(){return e(e.s=5053)}),_N_E=e.O()}]);